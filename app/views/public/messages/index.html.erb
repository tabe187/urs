<head>
</head>

<main>
  <div class="container">
    <div class="row">
      <div class="col-xl-3">
          <% current_user.rooms.each do |room| %>
              <% @another_user = (room.users.where.not(id: current_user.id).to_a)[0] %>
               <div class="row justify-content-center text-center">
                 <div class="col justify-content-center text-center">
                    <div class="flex-item">
                     <div class="room-image-wrap">
                        <% if @another_user.profile_image.attached? %>
                          <%= link_to user_path(@another_user.id)  do %>
                             <%= image_tag @another_user.get_profile_image(100,100) %><br>
                          <% end %><br>
                        <% else %>
                          <%= link_to user_path(@another_user.id)  do %>
                             <%= image_tag 'no_image', size: "50x50" %><br>
                          <% end %><br>
                        <% end %>
                     </div>
                    </div>
                 </div>
                 <div class="col">
                    <%= link_to @another_user.name, room_messages_path(room) %>
                 </div>
               </div>
          <% end %>
        </div>
        <div class="col-xl-6">
          <div id="message_area">
          ã€€<%= render partial: 'message', collection: @messages %>
          </div>
          <div class="chat">
            <%= render partial: 'chat', room: @room, message: @message %>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<script type="text/javascript">
// const scrollAuto = $('.messages');
// scrollAuto.animate({scrollTop: ($scrollAuto[0].scrollHeight + 1000)}, 'fast')
</script>
